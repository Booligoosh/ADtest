<html>
  <head>
    <title>ADtest</title>
    <script src="/jquery.min.js"></script>
    <script src="/urlParams/urlParams.js"></script>
  </head>
  <body>
    <div class="result">
    </div>
    <script>
      var url = null;
      if (urlParams.url == undefined) {
        while (url == null) {
          url = prompt("URL to get:");
          //window.location = "https://booligoosh.github.io/ADtest/index.html?url=" + url;
        }
      }
      else {
        url = urlParams.url;
      }
      var preserveData = "";
      $.get( "https://cors-anywhere.herokuapp.com/" + url, function( data ) {
        $( ".result" ).html( "\"\"" + data + "\"\"" );
        preserveData = data;
        //alert( "Load was performed." );
      });
      setTimeout(useData,1001);
      function useData() {
        //alert(preserveData);
        $( ".result" ).html(preserveData);
        setTimeout(addImages,1001);
      }
      function addImages() {
        var imgs = document.getElementsByTagName('img');
        for (var i = 0; i < imgs.length; i++) {
          toDataURL(imgs[i].src)
            .then(result => imgs[i].src = result)
            .catch(error => console.error(error)); ;
          }
      }
    </script>
  </body>
</html>
